# New HKS Variable:
hkbBehaviorGraphData:
    variableInfos: Add entry
    variableBounds: Add entry
    
hkbVariableValueSet 
    wordVariableValues: Add entry
    
hkbBehaviorGraphStringData
    variableNames: Add entry
    
Usage:
CustomManualSelectorGenerator:
 <hkparam name="variableBindingSet">#ID</hkparam>
 <hkparam name="#MEMBERNAME">0</hkparam>
 
hkbVariableBindingSet:
<hkobject class="hkbVariableBindingSet" name="#ID" signature="0xe942f339">
    <hkparam name="bindings" numelements="1">
        <hkobject>
            <hkparam name="memberPath">#MEMBERNAME</hkparam>
            <hkparam name="variableIndex">#VARINDEX</hkparam>
            <hkparam name="bitIndex">255</hkparam>
            <hkparam name="bindingType">BINDING_TYPE_VARIABLE</hkparam>
        </hkobject>
    </hkparam>
    <hkparam name="indexOfBindingToEnable">-1</hkparam>
</hkobject>

#-----------------------
# Adding new Havok Variable for use in HKS
#-----------------------
#--------------
# Preparation
#--------------
Unpack the cXXXX.behbnd.dcx (in this case we will be editing the player, so c0000.behbnd.dcx) using WitchyBND.

Unpack the c0000.hkx file within the Behaviors folder within the unpacked c0000.behbnd.dcx.

Unpack the c0000.hkx with HKXPack.

Open the resulting c0000.xml file in a text editor.

#--------------
# Adding the Variable
#--------------
To add a new Havok variable, you will need to add a new entry within the following hkparam lists:
 variableInfos
 variableBounds
 wordVariableValues
 variableNames

To do this, increment the numelements value by 1 and duplicate the last hkobject entry, and then edit the entry to your desired state.

#--- variableInfos ---
This hkparam defines the variable role, attributes and type. Typically you will only care about the type, which corresponds to data types used in programming. 

Here is a short list of the types:
 VARIABLE_TYPE_REAL -> Float
 VARIABLE_TYPE_INT8 -> Byte
 VARIABLE_TYPE_INT16 -> Short
 VARIABLE_TYPE_INT32 -> Integer
 VARIABLE_TYPE_BOOL -> Boolean
 VARIABLE_TYPE_POINTER -> Pointer
 VARIABLE_TYPE_VECTOR4 -> Vector with 4 values
 VARIABLE_TYPE_QUATERNION -> Quaternion
 
#--- variableBounds ---
This hkparam defines the minimum and maximum value the variable will support.

#--- wordVariableValues ---
This hkparam defines the default value the variable is set to.

#--- variableNames ---
This hkparam defines the string that holds the variable within the .hks script.

#--------------
# Using the Variable
#--------------
Now that a Havok variable has been added, you can make use of it within other hkobjects.

To do this, you will need to add a new hkbVariableBindingSet:

<hkobject class="hkbVariableBindingSet" name="#ID" signature="0xe942f339">
    <hkparam name="bindings" numelements="1">
        <hkobject>
            <hkparam name="memberPath">#MEMBERNAME</hkparam>
            <hkparam name="variableIndex">#VARINDEX</hkparam>
            <hkparam name="bitIndex">255</hkparam>
            <hkparam name="bindingType">BINDING_TYPE_VARIABLE</hkparam>
        </hkobject>
    </hkparam>
    <hkparam name="indexOfBindingToEnable">-1</hkparam>
</hkobject>

#ID should be a unique numeric ID.
#MEMBERNAME is the name of the hkparam that the variable should affect.
#VARINDEX is the list position of the variable within the hkparam lists.
For example, if you add a new variable to the vanilla c0000.xml, the index would be 223.

With the XX setup, you can now reference it within a hkobject via the variableBindingSet hkparam:

<hkparam name="variableBindingSet">#ID</hkparam>

#--------------
# Example
#--------------
A simple example for adding configurable animation speed to a weapon animation:

# --- hkbClipGenerator ---
<hkobject class="hkbClipGenerator" name="#530" signature="0xd4cc9f6">
    <hkparam name="variableBindingSet">#14995</hkparam>
    <hkparam name="userData">0</hkparam>
    <hkparam name="name">a020_030000_hkx_AutoSet_00</hkparam>
    <hkparam name="animationBundleName"/>
    <hkparam name="animationName">a020_030000</hkparam>
    <hkparam name="triggers">null</hkparam>
    <hkparam name="userPartitionMask">0</hkparam>
    <hkparam name="cropStartAmountLocalTime">0.0</hkparam>
    <hkparam name="cropEndAmountLocalTime">0.0</hkparam>
    <hkparam name="startTime">0.0</hkparam>
    <hkparam name="playbackSpeed">1.0</hkparam>
    <hkparam name="enforcedDuration">0.0</hkparam>
    <hkparam name="userControlledTimeFraction">0.0</hkparam>
    <hkparam name="animationBindingIndex">65535</hkparam>
    <hkparam name="mode">MODE_SINGLE_PLAY</hkparam>
    <hkparam name="flags">0</hkparam>
</hkobject>

# --- hkbVariableBindingSet ---
<hkobject class="hkbVariableBindingSet" name="#14995" signature="0xe942f339">
    <hkparam name="bindings" numelements="1">
        <hkobject>
            <hkparam name="memberPath">playbackSpeed</hkparam>
            <hkparam name="variableIndex">223</hkparam>
            <hkparam name="bitIndex">255</hkparam>
            <hkparam name="bindingType">BINDING_TYPE_VARIABLE</hkparam>
        </hkobject>
    </hkparam>
    <hkparam name="indexOfBindingToEnable">-1</hkparam>
</hkobject>